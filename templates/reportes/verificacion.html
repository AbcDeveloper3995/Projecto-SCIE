{% extends 'comun/listar.html' %}
{% load static %}\
{% load filters %}

{% block titulo %}
    {{ titulo }}
{% endblock %}

{% block idTable %}id="reporteVerificacionGeneral" {% endblock %}
{% block columns %}
        <tr>
            <th scope="col">Concepto</th>
            {% for clave, valor in secciones.items %}
                <th scope="col">{{ clave|numeroSeccion }} - {{ clave }} </th>
            {% endfor %}
        </tr>
{% endblock %}


{% block rows %}
        <tr>
            <td>Indicadores verificados</td>
            {% for clave,valor in secciones.items %}
                <td><span class="badge badge-primary">{{ request.user|totalVerificados:clave }}</span></td>
            {% endfor %}
        </tr>
        <tr>
            <td> No coinciden</td>
            {% for clave,valor in secciones.items %}
                <td><span class="badge badge-primary">{{ request.user|totalVerificadosNoCoinciden:clave }}</span></td>
            {% endfor %}
        </tr>
        <tr>
            <td> Porciento que representa (%)</td>
            {% for clave,valor in secciones.items %}
                <td><span class="badge badge-primary">{{ request.user|totalPorciento:clave }}%</span></td>
            {% endfor %}
        </tr>
{% endblock %}



{% block content_extra %}
    <div class="card card-default">
        <div class="card-header bg-gradient-navy">
            <h3 class="card-title">
                <i class="fas fa-table"></i>
                Reporte Por Cuestionario Captado
            </h3>
        </div>
        <div class="card-body">
            <table class="table table-bordered table-striped" id="tblVerificacionPorProvincia">
                <thead>
                <tr>
                    <th rowspan="2">Centro Informante</th>
                    {% for clave, valor in secciones.items %}
                        <th colspan="3" ><span
                                class="badge badge-primary">{{ clave|numeroSeccion }} - {{ clave }}</span></th>
                    {% endfor %}
                </tr>
                <tr>
                    {% for clave, valor in secciones.items %}
                        <th >Indicadores Verificados</th>
                        <th >No coinciden</th>
                        <th >(%)</th>
                    {% endfor %}
                </tr>
                </thead>
                <tbody>
                {% for i in cuestionarios %}
                    <tr>
                        <td><span class="badge badge-primary">{{ i.guia.nombre }}-{{ i.entidad_codigo }}</span></td>
                        {% for j in seccionesGuias %}
                            {% if  i.id|verificados:j.nombre == None %}
                                <td><i class="miTippy fa fa-times-circle" title="No evaluados para esta seccion"
                                       style="color: red"></i></td>
                                <td><i class="miTippy fa fa-times-circle" title="Sin resultados"
                                       style="color: red"></i></td>
                                <td><i class="miTippy fa fa-times-circle" title="Sin resultados"
                                       style="color: red"></i></td>
                            {% else %}
                                <td>{{ i.id|verificados:j.nombre }}</td>
                                <td>{{ i.id|noCoinciden:j.nombre }}</td>
                                <td>{{ i.id|porcientoVerificacion:j.nombre }}</td>
                            {% endif %}
                        {% endfor %}
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
{% endblock %}


{% block button %}

{% endblock %}